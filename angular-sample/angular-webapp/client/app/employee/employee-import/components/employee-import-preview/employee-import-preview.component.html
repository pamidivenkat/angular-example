<div id="import-employee-preview">
  <ae-banner [id]="getChildId('AeBanner')" [name]="getChildName('AeBanner')" [titleText]="'EMPLOYEE_IMPORT.EMPLOYEE_IMPORT_PREVIEW_HEADING' | translate:lang"
    [backgroundImage]="'/assets/images/lp-employees.jpg'">
    <ae2-breadcrumb [id]="'breadCrumb'" [name]="'breadCrumb'" [group]="bcGroup" class="bredcrumb-section"></ae2-breadcrumb>
  </ae-banner>
  <ae-notification [id]="getChildId('AeNotification',1)" [name]="getChildName('AeNotification',1)" [iconName]="'icon-info'"
    [textInfo]="'EMPLOYEE_IMPORT.EMPLOYEE_IMPORT_PREVIEW_TEXT' | translate:lang"></ae-notification>
  <div class="table spacer">
    <div id="import-employee-preview-message" *ngIf="showImportMessage()" class="bottom-15">
      <ae-message [id]="'import-employee-preview-message'" [name]="'import-employee-preview-message'" [text]="importMessage" [icon]="'icon-bell'"
        [messageType]="messagetType" (aeClose)="hideMessage()"></ae-message>
    </div>
    <div class="button-bar">
      <div class="button-bar__item">
        <ae-button [type]="'button'" [id]="'btnCancel'" [name]="'btnCancel'" [customClass]="'button button--cta'" [text]="'Cancel'"
          (aeClick)="onPreviewCancel($event)"></ae-button>
      </div>
      <div class="button-bar__item">
        <ae-button [type]="'button'" [id]="'btnAdd'" [name]="'btnAdd'" [customClass]="'button button--cta'" [text]="'BUTTONS.ADD' | translate: lang"
          (aeClick)="bulkInsert()"></ae-button>
      </div>
      <div class="button-bar__item">
        <ae-button [type]="'button'" [id]="'btnImportHistory'" [name]="'btnImportHistory'" [customClass]="'button button--cta'" [text]="'EMPLOYEE_IMPORT.VIEW_IMPORT_HISTORY' | translate:lang"
          (aeClick)="viewImportHistory()"></ae-button>
      </div>
      <div class="button-bar__item">
        <div class="checkbox-list-group" [class.open]="getOpen()">
          <div class="button-group-list">
            <ae-checkbox [id]="getChildId('AeCheckBox_showAll',1)" [name]="getChildName('AeCheckBox_showAll',1)" [checkText]="'Show All'"
              [value]="true" [checked]="showAll" (onAeChange)="showColumns()"></ae-checkbox>
            <div class="icon-sec" (click)="getOptionalColumnOpen($event)">
              <ae-icon [id]="getChildId('AeIcon_list',1)" [name]="getChildName('AeIcon_list',1)" [icon]="'icon-burger'" [title]="'EMPLOYEE_BULK_UPDATE.LIST' | translate: lang"></ae-icon>
            </div>
          </div>

          <div class="dropdown-list">
            <div *ngFor="let column of optionalColumns;let k=index;">
              <ae-checkbox [id]="getChildId('AeCheckBox_OptionalCol',k)" [name]="getChildName('AeCheckBox_OptionalCol',101)" [checkText]="column.Name"
                [value]="column.Show" [checked]="column.Show" (onAeChange)="setHideShowColumn(column.Key)"></ae-checkbox>
            </div>
          </div>
        </div>
      </div>

    </div>
    <ae-loader [loaderType]="loaderBars" *ngIf="!canShowDataGrid"></ae-loader>
    <div id="import-employee-preview-data-table" class="top-15 hide-pagination" *ngIf="canShowDataGrid">
      <ae-datatable [id]="getChildId('AeDatatable',1)" [name]="getChildName('AeDatatable',1)" [dataSource]="importEmployeeList$"
        [totalRecords]="totalRecords$" [inlineEdit]="true" [defaultOptions]="defaultDataTableOptions$ | async" [autoGenerateColumns]="false"
        [loading]="loadingStatus$ | async" [rowSelector]="highLightErrorRow">

        <ae-column [headerText]="'Errors'" [sortable]="false">
          <ae-template [type]="'header'">
            <ng-template>
              <ae-icon [id]="'icon-cross'" [name]="'icon-cross'" [size]="addressIconSize" [color]="'red'" [icon]="'icon-cross'" [title]="'EMPLOYEE_IMPORT.DELETE_ALL_EMP_IMPORT_CONFIRM' | translate:lang"
                (click)="deleteImportedEmployee(-1)"></ae-icon>
            </ng-template>
          </ae-template>
          <ae-template [type]="'edit'" [keys]="keys">
            <ng-template let-context="item">
              <span *ngIf="_employeeHasErrors(context.Row)">
              <ae-icon [id]="'icon-error'" [name]="'icon-error'" [size]="addressIconSize" [color]="''" [icon]="'icon-info'" [title]="getEmployeeErrorMessage(context.Row)"></ae-icon>     
            </span>
              <span>
              <ae-icon [id]="'icon-cross'" [name]="'icon-cross'" [size]="addressIconSize" [color]="'red'" [icon]="'icon-cross'" [title]="'EMPLOYEE_IMPORT.DELETE_EMP_IMPORT_CONFIRM' | translate:lang" (click)="deleteImportedEmployee(context.Row)"></ae-icon>
            </span>
            </ng-template>
          </ae-template>
        </ae-column>

        <ae-column [headerText]="'EMPLOYEE_PERSONAL.title' | translate:lang" [sortable]="false">
          <ae-template [type]="'header'">
            <ng-template>
              <span [title]="'EMPLOYEE_PERSONAL.title' | translate:lang">{{'EMPLOYEE_PERSONAL.title' | translate:lang}} *</span>
            </ng-template>
          </ae-template>
          <ae-template [type]="'edit'" [keys]="keys">
            <ng-template let-context="item">
              <div>
                <ae-select [id]="getChildId('AeSelect',context.Row)" [name]="getChildName('AeSelect',context.Row)" [title]="'EMPLOYEE_PERSONAL.title' | translate:lang"
                  [options]="employeeTitles" [placeholder]="'Please Select'" [value]="context.Title" (aeSelectChange)="setSelectPropertyValue($event,context,'Title')"
                  [hasError]="fieldHasRequiredError(context.Row,'Title')"></ae-select>

                <span *ngIf="fieldHasRequiredError(context.Row,'Title')" class="form__input__error" id="title_field_error">
          {{'EMPLOYEE_PERSONAL.title_required' | translate:lang}}.
            </span>
              </div>
            </ng-template>
          </ae-template>
        </ae-column>

        <ae-column [headerText]="'EMPLOYEE_PERSONAL.first_name' | translate:lang" [sortable]="false">
          <ae-template [type]="'header'">
            <ng-template>
              <span [title]="'EMPLOYEE_PERSONAL.first_name' | translate:lang">{{'EMPLOYEE_PERSONAL.first_name' | translate:lang}} *</span>
            </ng-template>
          </ae-template>
          <ae-template [type]="'edit'" [keys]="keys">
            <ng-template let-context="item">
              <div>
                <ae-input [id]="getChildId('AeInput',context.Row)" [name]="getChildName('AeInput',context.Row)" [placeholder]="'EMPLOYEE_PERSONAL.first_name' | translate:lang"
                  [title]="'EMPLOYEE_PERSONAL.first_name_tooltip' | translate:lang" [value]="context.FirstName" (aeChange)="setInputPropertyValue($event,context,'FirstName')"
                  [hasError]="fieldHasRequiredError(context.Row,'FirstName') || hasInvalidNameError(context.Row,'FirstName')"></ae-input>

                <span *ngIf="fieldHasRequiredError(context.Row,'FirstName')" class="form__input__error" id="firstname_rq_error">
            {{'EMPLOYEE_PERSONAL.first_name_required' | translate:lang}}.
            </span>
                <span *ngIf="hasInvalidNameError(context.Row,'FirstName')" class="form__input__error" id="firstname_validname_error">
            {{'EMPLOYEE_PERSONAL.only_alpha_msg' | translate:lang}}.
            </span>
              </div>
            </ng-template>
          </ae-template>
        </ae-column>

        <ae-column [headerText]="'EMPLOYEE_PERSONAL.surname' | translate:lang" [sortable]="false">
          <ae-template [type]="'header'">
            <ng-template>
              <span [title]="'EMPLOYEE_PERSONAL.surname' | translate:lang">{{'EMPLOYEE_PERSONAL.surname' | translate:lang}} *</span>
            </ng-template>
          </ae-template>
          <ae-template [type]="'edit'" [keys]="keys">
            <ng-template let-context="item">
              <div>
                <ae-input [id]="getChildId('AeInput',context.Row)" [name]="getChildName('AeInput',context.Row)" [value]="context.Surname"
                  [title]="'EMPLOYEE_PERSONAL.sur_name_tooltip' | translate:lang" [placeholder]="'EMPLOYEE_PERSONAL.surname' | translate:lang"
                  (aeChange)="setInputPropertyValue($event,context,'Surname')" [hasError]="fieldHasRequiredError(context.Row,'Surname') || hasInvalidNameError(context.Row,'Surname') "></ae-input>
                <span *ngIf="fieldHasRequiredError(context.Row,'Surname')" class="form__input__error" id="surname_req_error">{{'EMPLOYEE_PERSONAL.surname_required' | translate:lang}}.</span>
                <span *ngIf="hasInvalidNameError(context.Row,'Surname')" class="form__input__error" id="surname_validname_error">{{'EMPLOYEE_PERSONAL.only_alpha_msg' | translate:lang}}.</span>
              </div>
            </ng-template>
          </ae-template>
        </ae-column>

        <ae-column [headerText]="'EMPLOYEE_PERSONAL.middle_name' | translate:lang" [sortable]="false">
          <ae-template [type]="'header'">
            <ng-template>
              <span [title]="'EMPLOYEE_PERSONAL.middle_name' | translate:lang">{{'EMPLOYEE_PERSONAL.middle_name' | translate:lang}}</span>
            </ng-template>
          </ae-template>
          <ae-template [type]="'edit'" [keys]="keys">
            <ng-template let-context="item">
              <div class="cell-width--sm">
                <ae-input [id]="getChildId('AeInput',context.Row)" [name]="getChildName('AeInput',context.Row)" [value]="context.MiddleName"
                  [title]="'EMPLOYEE_PERSONAL.middle_name_tooltip' | translate:lang" [placeholder]="'EMPLOYEE_PERSONAL.middle_name' | translate:lang"
                  (aeChange)="setInputPropertyValue($event,context,'MiddleName')"></ae-input>
              </div>
            </ng-template>
          </ae-template>
        </ae-column>
        <ae-column [headerText]="'EMPLOYEE_PERSONAL.dob' | translate:lang" [sortable]="false">
          <ae-template [type]="'header'">
            <ng-template>
              <span [title]="'EMPLOYEE_PERSONAL.dob' | translate:lang">{{'EMPLOYEE_PERSONAL.dob' | translate:lang}} *</span>
            </ng-template>
          </ae-template>
          <ae-template [type]="'edit'" [keys]="keys">
            <ng-template let-context="item">
              <div class="cell-width--md">
                <ae-datetime-picker [id]="getChildId('AeDateTimePicker',context.Row)" [name]="getChildName('AeDateTimePicker',context.Row)"
                  [title]="'EMPLOYEE_PERSONAL.dob' | translate:lang" [monthNavigator]="true" [yearNavigator]="true" [showIcon]="true"
                  [defaultDate]="getDate(context.Row,'DOB')" (aeSelect)="setDateValue($event,context,'DOB')" [readonlyInput]="true"></ae-datetime-picker>
                <span *ngIf="fieldHasRequiredError(context.Row,'DOB')" class="form__input__error" id="dob_rq_error">{{'EMPLOYEE_PERSONAL.dob_required' | translate:lang}}.</span>
              </div>
            </ng-template>
          </ae-template>
        </ae-column>

        <ae-column [headerText]="'EMPLOYEE_BULK_UPDATE.HAS_EMAIL' | translate: lang" [sortable]="false">
          <ae-template [type]="'header'">
            <ng-template>
              <span [title]="'EMPLOYEE_BULK_UPDATE.HAS_EMAIL' | translate: lang">{{'EMPLOYEE_BULK_UPDATE.HAS_EMAIL' | translate: lang}}</span>
            </ng-template>
          </ae-template>
          <ae-template [type]="'edit'" [keys]="keys">
            <ng-template let-context="item">
              <div>
                <ae-switch [id]="getChildId('AeSwitch',context.Row)" [name]="getChildName('AeSwitch',context.Row)" [checked]="context.HasEmail"
                  [switchText]="' '" [textVisible]="'false'" [title]="'EMPLOYEE_IMPORT.HAS_EMAIL_TOOLTIP' | translate:lang"
                  (aeChange)="onHasEmailChanged($event,context,'HasEmail')" [value]="getFieldValue(context.Row,'HasEmail')"></ae-switch>
              </div>
            </ng-template>
          </ae-template>
        </ae-column>


        <ae-column [headerText]="'EMPLOYEE_BULK_UPDATE.CREATE_USER' | translate: lang" [sortable]="false">
          <ae-template [type]="'header'">
            <ng-template>
              <ae-checkbox [id]="getChildId('AeCheckBox', 'All')" [name]="getChildName('AeCheckBox', 'All')" [checkText]="'EMPLOYEE_BULK_UPDATE.CREATE_USER' | translate: lang"
                [title]="'EMPLOYEE_BULK_UPDATE.CREATE_USER' | translate: lang" [checked]="getCreateUserAllStatus()" [value]="getCreateUserAllStatus()"
                (onAeChange)="onCreateUserChangedToAll($event)"></ae-checkbox>
            </ng-template>
          </ae-template>
          <ae-template [type]="'edit'" [keys]="keys">
            <ng-template let-context="item">
              <ae-checkbox [id]="getChildId('AeCheckBox',context.Row)" [name]="getChildName('AeCheckBox',context.Row)" [checkText]="''"
                [title]="'EMPLOYEE_BULK_UPDATE.CREATE_USER' | translate: lang" [checked]="getFieldValue(context.Row,'CreateUser')"
                [value]="getFieldValue(context.Row,'CreateUser')" (onAeChange)="onCreateUserChanged($event,context,'CreateUser')"></ae-checkbox>
            </ng-template>
          </ae-template>
        </ae-column>

        <ae-column [headerText]="'EMAIL' | translate: lang" [sortable]="false">
          <ae-template [type]="'header'">
            <ng-template>
              <span [title]="'EMAIL' | translate: lang">{{'EMAIL' | translate: lang}}</span>
            </ng-template>
          </ae-template>
          <ae-template [type]="'edit'" [keys]="keys">
            <ng-template let-context="item">
              <div class="cell-width--sm">
                <ae-input [id]="getChildId('AeInput',context.Row)" [name]="getChildName('AeInput',context.Row)" [value]="getFieldValue(context.Row,'Email')"
                  (aeChange)="setInputPropertyValue($event,context,'Email')" [disabled]="isEmailDisabled(context.Row)" [placeholder]="'EMPLOYEE_CONTACTS.email_address' | translate:lang"
                  [title]="'EMPLOYEE_CONTACTS.email_address_tooltip' | translate:lang" [hasError]="(fieldHasRequiredEmailError(context.Row,'Email') || fieldHasInvalidEmail(context.Row, 'Email'))"></ae-input>
              </div>
              <span *ngIf="fieldHasRequiredEmailError(context.Row,'Email')" class="form__input__error">{{'EMPLOYEE_CONTACTS.email_required' | translate:lang}}.</span>
              <span *ngIf="fieldHasInvalidEmail(context.Row, 'Email')" class="form__input__error">{{'EMPLOYEE_CONTACTS.email_invalid' | translate:lang}}.</span>

            </ng-template>
          </ae-template>
        </ae-column>

        <ae-column [headerText]="'EMPLOYEE_IMPORT.USER_NAME' | translate:lang" [sortable]="false">
          <ae-template [type]="'header'">
            <ng-template>
              <span [title]="'EMPLOYEE_IMPORT.USER_NAME' | translate:lang">{{'EMPLOYEE_IMPORT.USER_NAME' | translate:lang}}</span>
            </ng-template>
          </ae-template>
          <ae-template [type]="'edit'" [keys]="keys">
            <ng-template let-context="item">
              <div class="cell-width--md">
                <ae-input [title]="'EMPLOYEE_IMPORT.USER_NAME' | translate:lang" [id]="getChildId('AeInput',context.Row)" [name]="getChildName('AeInput',context.Row)"
                  [value]="getFieldValue(context.Row,'UserName')" (aeChange)="setInputPropertyValue($event,context,'UserName')"
                  [disabled]="isUserNameDisabled(context.Row)" [hasError]="fieldHasRequiredUserName(context.Row, 'UserName') && isUserNameHasInValidPattern(context.Row, 'UserName')"></ae-input>
                <span *ngIf="fieldHasRequiredUserName(context.Row, 'UserName')" class="form__input__error" [title]="'EMPLOYEE_IMPORT.USER_NAME_REQUIRED_ERROR' | translate:lang">{{'EMPLOYEE_IMPORT.USER_NAME_REQUIRED_ERROR' | translate:lang}}</span>
                <span *ngIf="isUserNameHasInValidPattern(context.Row, 'UserName')" class="form__input__error" [title]="'EMPLOYEE_IMPORT.USER_NAME_INVALID_CRITERIA_ERROR' | translate:lang">{{'EMPLOYEE_IMPORT.USER_NAME_INVALID_CRITERIA_ERROR' | translate:lang}}</span>
              </div>
            </ng-template>
          </ae-template>
        </ae-column>


        <ae-column [headerText]="'EMPLOYEE_IMPORT.USER_PROFILE' | translate:lang" [sortable]="false">
          <ae-template [type]="'header'">
            <ng-template>
              <span [title]="'EMPLOYEE_IMPORT.USER_PROFILE' | translate:lang">{{'EMPLOYEE_IMPORT.USER_PROFILE' | translate:lang}}*</span>
            </ng-template>
          </ae-template>
          <ae-template [type]="'edit'" [keys]="keys">
            <ng-template let-context="item">
              <div class="cell-width--xl fixed-col-atcomplete">
                <ae-select [id]="getChildId('AeSelect',context.Row)" [name]="getChildName('AeSelect',context.Row)" [title]="'User Profile'"
                  [options]="getProfiles(userProfilesOptionsList$ | async,context.Row)" [placeholder]="'PLEASE_SELECT' | translate: lang" (aeSelectChange)="onProfileChanged($event,context,'UserProfileId')"
                  [hasError]="fieldHasRequiredUserProfileError(context.Row, 'UserProfileId')" [value]="getFieldValue(context.Row,'UserProfileId')">
                </ae-select>
                <span *ngIf="fieldHasRequiredUserProfileError(context.Row, 'UserProfileId')" class="form__input__error">{{'THIS_FIELD_REQUIRED' | translate: lang}}</span>

              </div>
            </ng-template>
          </ae-template>
        </ae-column>

        <ae-column [headerText]="'EMPLOYEE_PERSONAL.gender' | translate: lang" [sortable]="false">
          <ae-template [type]="'header'">
            <ng-template>
              <span [title]="'EMPLOYEE_PERSONAL.gender' | translate: lang">{{'EMPLOYEE_PERSONAL.gender' | translate: lang}}</span>
            </ng-template>
          </ae-template>
          <ae-template [type]="'edit'" [keys]="keys">
            <ng-template let-context="item">
              <ae-select [id]="getChildId('AeSelect',context.Row)" [name]="getChildName('AeSelect',context.Row)" [title]="'EMPLOYEE_PERSONAL.gender' | translate: lang"
                [options]="genderList" [placeholder]="'PLEASE_SELECT' | translate: lang" [value]="context.Gender" (aeSelectChange)="setSelectPropertyValue($event,context,'Gender')"></ae-select>
            </ng-template>
          </ae-template>
        </ae-column>


        <ae-column [headerText]="'EMPLOYEE_JOB_DETAILS.job_title' | translate:lang" [sortable]="false">
          <ae-template [type]="'header'">
            <ng-template>
              <span [title]="'EMPLOYEE_JOB_DETAILS.job_title' | translate:lang">{{'EMPLOYEE_JOB_DETAILS.job_title' | translate:lang}}</span>
            </ng-template>
          </ae-template>
          <ae-template [type]="'edit'" [keys]="keys">
            <ng-template let-context="item">
              <div class="cell-width--sm">
                <ae-autocomplete [id]="getChildId('JobTitle',context.Row)" [name]="getChildName('JobTitle',context.Row)" [placeholder]="'Select job title'"
                  [title]="'EMPLOYEE_JOB_DETAILS.job_title' | translate:lang" [multiselect]="false" [items]="jobTitleOptionList"
                  [dstype]="dsType" [field]="'Text'" [valuefield]="'Value'" [initialtext]="getJobTitle(context.Row)" (aeInputChange)="onJobTitleSearchChange($event,context.Row)">
                </ae-autocomplete>
              </div>
              <span *ngIf="fieldHasRequiredJobTitleError(context.Row)" class="form__input__error">{{'EMPLOYEE_JOB_DETAILS.job_title_required' | translate:lang}}.</span>
            </ng-template>
          </ae-template>
        </ae-column>

        <ae-column [headerText]="'Start date'" [sortable]="false">
          <ae-template [type]="'header'">
            <ng-template>
              <span [title]="'Start date'">Start date</span>
            </ng-template>
          </ae-template>
          <ae-template [type]="'edit'" [keys]="keys">
            <ng-template let-context="item">
              <div class="cell-width--md">
                <ae-datetime-picker [id]="getChildId('AeDatePicker',context.Row)" [name]="getChildName('AeDatePicker',context.Row)" [readonlyInput]="true"
                  [title]="'EMPLOYEE_IMPORT.START_DATE_TOOL_TIP' | translate:lang" [monthNavigator]="true" [yearNavigator]="true"
                  [showIcon]="true" [defaultDate]="getDate(context.Row,'Job.StartDate')" (aeSelect)="setDateValue($event,context,'Job.StartDate')"></ae-datetime-picker>
              </div>
            </ng-template>
          </ae-template>
        </ae-column>

        <ae-column [headerText]="'EMPLOYEE_BULK_UPDATE.EMP_NUMBER' | translate: lang" [sortable]="false">
          <ae-template [type]="'header'">
            <ng-template>
              <span [title]="'EMPLOYEE_BULK_UPDATE.EMP_NUMBER' | translate: lang">{{'EMPLOYEE_BULK_UPDATE.EMP_NUMBER' | translate: lang}}</span>
            </ng-template>
          </ae-template>
          <ae-template [type]="'edit'" [keys]="keys">
            <ng-template let-context="item">
              <div class="cell-width--sm">
                <ae-input [id]="getChildId('AeInput',context.Row)" [title]="'EMPLOYEE_BULK_UPDATE.EMP_NUMBER' | translate: lang" [name]="getChildName('AeInput',context.Row)"
                  [value]="getFieldValue(context.Row,'EmployeeNumber')" (aeChange)="setInputPropertyValue($event,context,'EmployeeNumber')"></ae-input>
              </div>
            </ng-template>
          </ae-template>
        </ae-column>


        <ae-column [headerText]="'EMPLOYEE_PERSONAL.nationality' | translate:lang" [sortable]="false">
          <ae-template [type]="'header'">
            <ng-template>
              <span [title]="'EMPLOYEE_PERSONAL.nationality' | translate:lang">{{'EMPLOYEE_PERSONAL.nationality' | translate:lang}} *</span>
            </ng-template>
          </ae-template>
          <ae-template [type]="'edit'" [keys]="keys">
            <ng-template let-context="item">
              <div class="cell-width--sm">
                <ae-input [id]="getChildId('AeInput',context.Row)" [name]="getChildName('AeInput',context.Row)" [value]="context.Nationality"
                  (aeChange)="setInputPropertyValue($event,context,'Nationality')" [placeholder]="'EMPLOYEE_PERSONAL.nationality' | translate:lang"
                  [title]="'EMPLOYEE_PERSONAL.nationality_tooltip' | translate:lang" [hasError]="fieldHasRequiredError(context.Row,'Nationality') && hasInvalidNameError(context.Row
                ,'Nationality')"></ae-input>
                <span *ngIf="fieldHasRequiredError(context.Row,'Nationality')" class="form__input__error" id="nationality_req_error">{{'EMPLOYEE_PERSONAL.nationality_required' | translate:lang}}.</span>
                <span *ngIf="hasInvalidNameError(context.Row,'Nationality')" class="form__input__error" id="nationality_validname_error">
            {{'EMPLOYEE_PERSONAL.only_alpha_msg' | translate:lang}}.
            </span>
              </div>
            </ng-template>
          </ae-template>
        </ae-column>


        <ae-column [headerText]="'EMPLOYEE_IMPORT.DAYS_PER_WEEK' | translate:lang" [sortable]="false">
          <ae-template [type]="'header'">
            <ng-template>
              <span [title]="'EMPLOYEE_IMPORT.DAYS_PER_WEEK' | translate:lang">{{'EMPLOYEE_IMPORT.DAYS_PER_WEEK' | translate:lang}}</span>
            </ng-template>
          </ae-template>
          <ae-template [type]="'edit'" [keys]="keys">
            <ng-template let-context="item">
              <ae-input [id]="getChildId('AeInput',context.Row)" [name]="getChildName('AeInput',context.Row)" [type]="inputTypeNumber"
                [step]="1" [min]="0" [placeholder]="'Days per week (in days)'" [title]="'EMPLOYEE_JOB_DETAILS.days_per_week_tooltip' | translate:lang"
                [placeholder]="'EMPLOYEE_JOB_DETAILS.days_per_week_placeholder' | translate:lang" [value]="getFieldValue(context.Row,'Job.Days')"
                (aeChange)="setInputPropertyValue($event,context,'Job.Days')" [hasError]="fieldHasInvalidWeekDays(context.Row)"></ae-input>
              <span *ngIf="fieldHasInvalidWeekDays(context.Row)" class="form__input__error" id="nationality_req_error">{{'EMPLOYEE_IMPORT.INVALID_DAYS_ERROR' | translate:lang}}.</span>
            </ng-template>
          </ae-template>
        </ae-column>

        <ae-column [headerText]="'EMPLOYEE_JOB_DETAILS.hours_per_week' | translate:lang" [sortable]="false">
          <ae-template [type]="'header'">
            <ng-template>
              <span [title]="'EMPLOYEE_JOB_DETAILS.hours_per_week' | translate:lang">{{'EMPLOYEE_JOB_DETAILS.hours_per_week' | translate:lang}}</span>
            </ng-template>
          </ae-template>
          <ae-template [type]="'edit'" [keys]="keys">
            <ng-template let-context="item">
              <div>
                <ae-input [id]="getChildId('AeInput',context.Row)" [name]="getChildName('AeInput',context.Row)" [type]="inputTypeNumber"
                  [step]="1" [min]="0" [value]="getFieldValue(context.Row,'Job.HoursAWeek')" (aeChange)="setInputPropertyValue($event,context,'Job.HoursAWeek')"
                  [title]="'EMPLOYEE_JOB_DETAILS.hours_per_week_tooltip' | translate:lang" [placeholder]="'EMPLOYEE_JOB_DETAILS.hours_per_week' | translate:lang"
                  [hasError]="fieldHasRequiredError(context.Row,'Job.HoursAWeek')"></ae-input>
                <span *ngIf="fieldHasRequiredError(context.Row,'Job.HoursAWeek') && fieldHasInvalidHours(context.Row)" class="form__input__error">{{'EMPLOYEE_JOB_DETAILS.hours_per_week_required' | translate:lang}}.</span>
                <span *ngIf="fieldHasInvalidHours(context.Row)" class="form__input__error" id="nationality_req_error">{{'EMPLOYEE_IMPORT.INVALID_HOURS_ERROR' | translate:lang}}.</span>
              </div>
            </ng-template>
          </ae-template>
        </ae-column>

        <ae-column [headerText]="'EMPLOYEE_PERSONAL.ni_number' | translate:lang" [sortable]="false">
          <ae-template [type]="'header'">
            <ng-template>
              <span [title]="'EMPLOYEE_PERSONAL.ni_number' | translate:lang">{{'EMPLOYEE_PERSONAL.ni_number' | translate:lang}}</span>
            </ng-template>
          </ae-template>
          <ae-template [type]="'edit'" [keys]="keys">
            <ng-template let-context="item">
              <div>
                <ae-input [id]="getChildId('AeInput',context.Row)" [name]="getChildName('AeInput',context.Row)" [title]="'EMPLOYEE_PERSONAL.ninumber_tooltip' | translate:lang"
                  [placeholder]="'EMPLOYEE_PERSONAL.ni_number_placeholder' | translate:lang" [value]="getFieldValue(context.Row,'EmployeePayrollDetails.NINumber')"
                  (aeChange)="setInputPropertyValue($event,context,'EmployeePayrollDetails.NINumber')" [hasError]="isNiNumberInValid(context.Row,'EmployeePayrollDetails.NINumber')"></ae-input>
                <span *ngIf="isNiNumberInValid(context.Row,'EmployeePayrollDetails.NINumber')" class="form__input__error" id="ninumber_valid_error">{{'EMPLOYEE_PERSONAL.ninumber_hint' | translate:lang}}.</span>
              </div>
            </ng-template>
          </ae-template>
        </ae-column>


        <ae-column [headerText]="'EMPLOYEE_PERSONAL.tax_code_update' | translate:lang" [sortable]="false">
          <ae-template [type]="'header'">
            <ng-template>
              <span [title]="'EMPLOYEE_PERSONAL.tax_code_update' | translate:lang">{{'EMPLOYEE_PERSONAL.tax_code_update' | translate:lang}}</span>
            </ng-template>
          </ae-template>
          <ae-template [type]="'edit'" [keys]="keys">
            <ng-template let-context="item">
              <ae-input [id]="getChildId('AeInput',context.Row)" [name]="getChildName('AeInput',context.Row)" [title]="'EMPLOYEE_PERSONAL.tax_code_tooltip' | translate:lang"
                [placeholder]="'EMPLOYEE_PERSONAL.tax_code_update' | translate:lang" [value]="context.EmployeePayrollDetails.TaxCode"
                (aeChange)="setInputPropertyValue($event,context,'EmployeePayrollDetails.TaxCode')"></ae-input>
            </ng-template>
          </ae-template>
        </ae-column>


        <ae-column [headerText]="'EMPLOYEE_PERSONAL.previous_name' | translate:lang" [sortable]="false">
          <ae-template [type]="'header'">
            <ng-template>
              <span [title]="'EMPLOYEE_PERSONAL.previous_name' | translate:lang">{{'EMPLOYEE_PERSONAL.previous_name' | translate:lang}}</span>
            </ng-template>
          </ae-template>
          <ae-template [type]="'edit'" [keys]="keys">
            <ng-template let-context="item">
              <div class="cell-width--sm">
                <ae-input [id]="getChildId('AeInput',context.Row)" [name]="getChildName('AeInput',context.Row)" [title]="'EMPLOYEE_PERSONAL.previous_name_tooltip' | translate:lang"
                  [placeholder]="'EMPLOYEE_PERSONAL.previous_name' | translate:lang" [value]="context.PreviousName" (aeChange)="setInputPropertyValue($event,context,'PreviousName')"></ae-input>
              </div>
            </ng-template>
          </ae-template>
        </ae-column>

        <ae-column [headerText]="'EMPLOYEE_PERSONAL.ethnicity' | translate:lang" [sortable]="false">
          <ae-template [type]="'header'">
            <ng-template>
              <span [title]="'EMPLOYEE_PERSONAL.ethnicity' | translate:lang">{{'EMPLOYEE_PERSONAL.ethnicity' | translate:lang}}</span>
            </ng-template>
          </ae-template>
          <ae-template [type]="'edit'" [keys]="keys">
            <ng-template let-context="item">
              <div>
                <ae-select [id]="getChildId('AeSelect',context.Row)" [name]="getChildName('AeSelect',context.Row)" [options]="ethnicGroupData"
                  [isOptGroup]="true" (aeSelectChange)="onEthnicityChange($event,context,'EthnicGroupValueId')" [title]="'EMPLOYEE_PERSONAL.ethnicity_tooltip' | translate:lang"
                  [value]="getEthnicGroupValueId(context)"></ae-select>
                <div>
                  <ae-input *ngIf="showOtherEthinicty(context.Row)" [id]="getChildId('AeInput',context.Row)" [name]="getChildName('AeInput',context.Row)"
                    [placeholder]="'Other ethnicity'" [title]="'Other ethnicity'" (aeChange)="setInputPropertyValue($event,context,'EthnicGroup.Name')"></ae-input>
                  <span *ngIf="showOtherEthinicty(context.Row) && fieldHasRequiredError(context.Row,'EthnicGroup.Name')" class="form__input__error"
                    id="nationality_req_error">{{'EMPLOYEE_PERSONAL.ethnicity_required' | translate:lang}}</span>
                </div>
              </div>
            </ng-template>
          </ae-template>
        </ae-column>


        <ae-column [headerText]="'EMPLOYEE_JOB_DETAILS.holiday_unit_type' | translate:lang" [sortable]="false">
          <ae-template [type]="'header'">
            <ng-template>
              <span [title]="'EMPLOYEE_JOB_DETAILS.holiday_unit_type' | translate:lang">{{'EMPLOYEE_JOB_DETAILS.holiday_unit_type' | translate:lang}}</span>
            </ng-template>
          </ae-template>
          <ae-template [type]="'edit'" [keys]="keys">
            <ng-template let-context="item">
              <div>
                <ae-select [id]="getChildId('HolidayUnitType',context.Row)" [name]="getChildName('HolidayUnitType',context.Row)" [placeholder]="'Please Select'"
                  [options]="holidayUnitTypeDataSelectList" [value]="context.Job.HolidayUnitType" (aeSelectChange)="setSelectPropertyValue($event,context,'Job.HolidayUnitType')"
                  [title]="'EMPLOYEE_JOB_DETAILS.holiday_unit_type_tooltip' | translate:lang"></ae-select>
              </div>
            </ng-template>
          </ae-template>
        </ae-column>


        <ae-column [headerText]="'EMPLOYEE_JOB_DETAILS.holiday_entitlement' | translate" [sortable]="false">
          <ae-template [type]="'header'">
            <ng-template>
              <span [title]="'EMPLOYEE_JOB_DETAILS.holiday_entitlement' | translate">{{'EMPLOYEE_JOB_DETAILS.holiday_entitlement' | translate:lang}}</span>
            </ng-template>
          </ae-template>
          <ae-template [type]="'edit'" [keys]="keys">
            <ng-template let-context="item">
              <ae-input [id]="getChildId('HolidayEntitlement',context.Row)" [name]="getChildName('HolidayEntitlement',context.Row)" [title]="'EMPLOYEE_IMPORT.HOLIDAY_ENTITLEMENT_TOOLTIP' | translate:lang"
                [placeholder]="'EMPLOYEE_JOB_DETAILS.holiday_entitlement' | translate:lang" [value]="context.Job.HolidayEntitlement"
                (aeChange)="setInputPropertyValue($event,context,'Job.HolidayEntitlement')" [type]="inputTypeNumber" [hasError]="fieldHasInvalidEntitlementPeriod(context.Row) "></ae-input>
                <span *ngIf="fieldHasInvalidEntitlementPeriod(context.Row) " class="form__input__error " id="nationality_req_error ">{{'EMPLOYEE_JOB_DETAILS.entitlement_period_error_msg' | translate:lang}}.</span>
            </ng-template>
          </ae-template>
        </ae-column>


        <ae-column [headerText]="'EMPLOYEE_JOB_DETAILS.probationary_period' | translate" [sortable]="false">
          <ae-template [type]="'header'">
            <ng-template>
              <span [title]="'EMPLOYEE_JOB_DETAILS.probationary_period' | translate">{{'EMPLOYEE_JOB_DETAILS.probationary_period' | translate:lang}}</span>
            </ng-template>
          </ae-template>
          <ae-template [type]="'edit'" [keys]="keys">
            <ng-template let-context="item">
              <div class="cell-width--sm">
                <ae-input [id]="getChildId('ProbationaryPeriod',context.Row)" [name]="getChildName('ProbationaryPeriod',context.Row)" [title]="'EMPLOYEE_JOB_DETAILS.probationary_period_tooltip' | translate:lang"
                  [placeholder]="'EMPLOYEE_JOB_DETAILS.probationary_period' | translate:lang" [value]="context.Job.ProbationaryPeriod"
                  (aeChange)="setInputPropertyValue($event,context,'Job.ProbationaryPeriod')" [type]="inputTypeNumber" [hasError]="fieldHasInvalidProbationaryPeriod(context.Row)"></ae-input>
                <span *ngIf="fieldHasInvalidProbationaryPeriod(context.Row)" class="form__input__error" id="nationality_req_error">{{'EMPLOYEE_IMPORT.INVALID_PROBATIONARY_PERIOD_ERROR' | translate:lang}}.</span>
              </div>
            </ng-template>
          </ae-template>
        </ae-column>


        <ae-column [headerText]="'EMPLOYEE_JOB_DETAILS.home_based' | translate" [sortable]="false">
          <ae-template [type]="'header'">
            <ng-template>
              <span [title]="'EMPLOYEE_JOB_DETAILS.home_based' | translate">{{'EMPLOYEE_JOB_DETAILS.home_based' | translate:lang}}</span>
            </ng-template>
          </ae-template>
          <ae-template [type]="'edit'" [keys]="keys">
            <ng-template let-context="item">
              <ae-switch [id]="getChildId('HomeBased',context.Row)" [name]="getChildName('HomeBased',context.Row)" [title]="'EMPLOYEE_JOB_DETAILS.home_based_tooltip' | translate:lang"
                [switchText]="''" [value]="getJobDetails(context.Row,'HomeBased')" [checked]="getJobDetails(context.Row,'HomeBased')"
                (aeChange)="setInputSwitchPropertyValue($event,context,'Job.HomeBased')"></ae-switch>
            </ng-template>
          </ae-template>
        </ae-column>


        <ae-column [headerText]="'EMPLOYEE_CONTACTS.address' | translate: lang" [sortable]="false">
          <ae-template [type]="'header'">
            <ng-template>
              <span [title]="'EMPLOYEE_CONTACTS.address' | translate: lang">{{'EMPLOYEE_CONTACTS.address' | translate: lang}}</span>
            </ng-template>
          </ae-template>
          <ae-template [type]="'edit'" [keys]="keys">
            <ng-template let-context="item">
              <div class="cell-width--md address-field">
                <ae-input [id]="getChildId('Address',context.Row)" [title]="'EMPLOYEE_CONTACTS.address' | translate: lang" [name]="getChildName('Address',context.Row)"
                  [placeholder]="'EMPLOYEE_CONTACTS.address' | translate: lang" [value]="DisplayAddress(context.Address)" [readonly]="true"></ae-input>
                <ae-icon [id]="'address-icon'" [name]="'address-icon'" [size]="addressIconSize" [color]="'green'" [icon]="'icon-location-pin'"
                  (click)="addorUpdateAddress(context) "></ae-icon>
              </div>
            </ng-template>
          </ae-template>
        </ae-column>

        <ae-column [headerText]="'EMPLOYEE_JOB_DETAILS.employment_type' | translate:lang" [sortable]="false">
          <ae-template [type]="'header'">
            <ng-template>
              <span [title]="'EMPLOYEE_JOB_DETAILS.employment_type' | translate:lang">{{'EMPLOYEE_JOB_DETAILS.employment_type' | translate:lang}}</span>
            </ng-template>
          </ae-template>
          <ae-template [type]="'edit'" [keys]="keys">
            <ng-template let-context="item">
              <div class="cell-width--lg">
                <div class="cell-width--xs pull-left">
                  <ae-select [id]="getChildId('EmploymentTypeId',context.Row)" [name]="getChildName('EmploymentTypeId',context.Row)" [title]="'Employment Type'"
                    [placeholder]="'Please Select'" [options]="employmentTypeDataSelectList" [value]="getFieldValue(context.Row,'EmploymentTypeId')"
                    (aeSelectChange)="setEmploymentTypeValue($event,context,'EmploymentTypeId')"></ae-select>
                </div>
                <div class="cell-width--xs pull-left">
                  <ae-input [id]="getChildId('OtherEmployeeType',context.Row)" [name]="getChildName('OtherEmployeeType',context.Row)" [title]="'EMPLOYEE_JOB_DETAILS.other_employment_type_tooltip' | translate:lang"
                    [placeholder]="'EMPLOYEE_JOB_DETAILS.other_employment_type_placeholder' | translate:lang" [readonly]="isOtherEmploymentReadOnly(context.Row)"
                    [value]="getOtherEmploymentDetails(context.Row)" [hasError]="isOtherEmploymentRequired(context.Row)" (aeChange)="setInputPropertyValue($event,context,'Job.OtherEmployeeType')"></ae-input>
                </div>
              </div>
              <span *ngIf="isOtherEmploymentRequired(context.Row)" class="form__input__error" id="title_field_error"> {{'THIS_FIELD_REQUIRED' | translate: lang}}</span>
            </ng-template>
          </ae-template>
        </ae-column>


        <ae-column [headerText]="'EMPLOYEE_JOB_HISTORY.department' | translate:lang" [sortable]="false">
          <ae-template [type]="'header'">
            <ng-template>
              <span [title]="'EMPLOYEE_JOB_HISTORY.department' | translate:lang">{{'EMPLOYEE_JOB_HISTORY.department' | translate:lang}}</span>
            </ng-template>
          </ae-template>
          <ae-template [type]="'edit'" [keys]="keys">
            <ng-template let-context="item">
              <div class="cell-width--md">
                <ae-select [id]="getChildId('DepartmentId',context.Row)" [name]="getChildName('DepartmentId',context.Row)" [title]="'EMPLOYEE_JOB_DETAILS.department_or_team_tooltip' | translate:lang"
                  [placeholder]="'Please Select'" [options]="departmentDataSelectList" [value]="getJobDetails(context.Row,'DepartmentId')"
                  (aeSelectChange)="setSelectPropertyValue($event,context,'Job.DepartmentId') "></ae-select>
              </div>
            </ng-template>
          </ae-template>
        </ae-column>

        <ae-column [headerText]="'EMPLOYEE_JOB_DETAILS.location_or_site' | translate:lang" [sortable]="false ">
          <ae-template [type]=" 'header' ">
            <ng-template>
              <span [title]="'EMPLOYEE_JOB_DETAILS.location_or_site' | translate:lang">{{'EMPLOYEE_JOB_DETAILS.location_or_site' | translate:lang}}</span>
            </ng-template>
          </ae-template>
          <ae-template [type]=" 'edit' " [keys]="keys ">
            <ng-template let-context="item ">
              <ae-select [id]="getChildId( 'SiteId',context.Row)" [name]="getChildName( 'SiteId',context.Row)" [title]="'EMPLOYEE_JOB_DETAILS.location_or_site_tooltip' | translate:lang"
                [placeholder]=" 'Please Select' " [options]="siteDataSelectList" [value]="getJobDetails(context.Row,'SiteId')"
                (aeSelectChange)="setSelectPropertyValue($event,context,'Job.SiteId') "></ae-select>
            </ng-template>
          </ae-template>
        </ae-column>

        <ae-column [headerText]="'EMPLOYEE_SALARY_HISTORY.PAY' | translate:lang" [sortable]="false ">
          <ae-template [type]=" 'header' ">
            <ng-template>
              <span [title]="'EMPLOYEE_SALARY_HISTORY.PAY' | translate:lang">{{'EMPLOYEE_SALARY_HISTORY.PAY' | translate:lang}}</span>
            </ng-template>
          </ae-template>
          <ae-template [type]=" 'edit' " [keys]="keys ">
            <ng-template let-context="item ">
              <ae-input [id]="getChildId( 'AeInput',context.Row)" [title]="'EMPLOYEE_SALARY_HISTORY.PAY' | translate:lang" [name]="getChildName( 'AeInput',context.Row) "
                [type]="inputTypeNumber" [step]="0.001" [min]="0 " [placeholder]="'EMPLOYEE_SALARY_HISTORY.ENTER_IN_POUNDS' | translate:lang"
                [value]="getSalaryInfo(context,'Pay')" (aeChange)="updateSalaryInfo($event,context,'Pay')"></ae-input>
            </ng-template>
          </ae-template>
        </ae-column>

        <ae-column [headerText]="'EMPLOYEE_SALARY_HISTORY.IS_CURRENT_SALARY' | translate:lang" [sortable]="false ">
          <ae-template [type]=" 'header' ">
            <ng-template>
              <span [title]="'EMPLOYEE_SALARY_HISTORY.IS_CURRENT_SALARY' | translate:lang">{{'EMPLOYEE_SALARY_HISTORY.IS_CURRENT_SALARY' | translate:lang}}</span>
            </ng-template>
          </ae-template>
          <ae-template [type]=" 'edit' " [keys]="keys ">
            <ng-template let-context="item ">
              <ae-checkbox [id]="getChildId( 'CurrenySalary',context.Row) " [name]="getChildName( 'CurrenySalary',context.Row) " [title]="'Current Salary'"
                [checkText]="''" [value]="getSalaryInfo(context,'IsCurrentSalary')" [checked]="getSalaryInfo(context,'IsCurrentSalary')"
                (aeChange)="updateSalaryInfo($event,context,'IsCurrentSalary')"></ae-checkbox>
            </ng-template>
          </ae-template>
        </ae-column>


        <ae-column [headerText]="'EMPLOYEE_SALARY_HISTORY.PERIOD' | translate:lang" [sortable]="false ">
          <ae-template [type]=" 'header' ">
            <ng-template>
              <span [title]="'EMPLOYEE_SALARY_HISTORY.PERIOD' | translate:lang">{{'EMPLOYEE_SALARY_HISTORY.PERIOD' | translate:lang}}</span>
            </ng-template>
          </ae-template>
          <ae-template [type]=" 'edit' " [keys]="keys ">
            <ng-template let-context="item ">
              <ae-select [id]="getChildId( 'Period',context.Row) " [name]="getChildName( 'Period',context.Row) " [title]="'Period'" [placeholder]="'EMPLOYEE.please_select' | translate:lang"
                [options]="employeePeriodOptionList " [value]="getSalaryInfo(context,'EmployeePeriodId')" (aeSelectChange)="updateSalaryInfo($event,context,'EmployeePeriodId')"></ae-select>
            </ng-template>
          </ae-template>
        </ae-column>

        <ae-column [headerText]="'EMPLOYEE_BULK_UPDATE.EMERGENCY_CONTACT' | translate: lang" [sortable]="false ">
          <ae-template [type]=" 'header' ">
            <ng-template>
              <span [title]="'EMPLOYEE_BULK_UPDATE.EMERGENCY_CONTACT' | translate: lang">{{'EMPLOYEE_BULK_UPDATE.EMERGENCY_CONTACT' | translate: lang}}</span>
            </ng-template>
          </ae-template>
          <ae-template [type]=" 'edit' " [keys]="keys ">
            <ng-template let-context="item ">
              <div *ngIf="context.EmergencyContacts " class="cell-width--sm  address-field">
                <div *ngFor="let emergencyContact of context.EmergencyContacts;let k=index;">
                  <ae-input [id]="getChildId( 'AeInput',context.Row)" [title]="'EMPLOYEE_BULK_UPDATE.EMERGENCY_CONTACT' | translate: lang"
                    [name]="getChildName( 'AeInput',context.Row)" [value]="getEmergencyContactName(context,k)" [readonly]="true"
                    [placeholder]="''"></ae-input>
                  <ae-icon [id]="'EmergencyContact-icon'" [name]="'EmergencyContact-icon'" [size]="addressIconSize" [color]="'green'" [icon]="'icon-location-pin'"
                    (click)="openEmpEmergencyContactsUpdateForm(context)"></ae-icon>
                </div>
              </div>
            </ng-template>
          </ae-template>
        </ae-column>
      </ae-datatable>
    </div>
    <div class="button-bar top-15">
      <div class="button-bar__item">
        <ae-button [type]="'button'" [id]="'btnCancel'" [name]="'btnCancel'" [customClass]="'button button--cta'" [text]="'Cancel'"
          (aeClick)="onPreviewCancel($event)"></ae-button>
      </div>
      <div class="button-bar__item">
        <ae-button [type]="'button'" [id]="'btnAdd'" [name]="'btnAdd'" [customClass]="'button button--cta'" [text]="'Add'" (aeClick)="bulkInsert()"></ae-button>
      </div>
      <div class="button-bar__item">
        <ae-button [type]="'button'" [id]="'btnImportHistory'" [name]="'btnImportHistory'" [customClass]="'button button--cta'" [text]="'EMPLOYEE_IMPORT.VIEW_IMPORT_HISTORY' | translate:lang"
          (aeClick)="viewImportHistory()"></ae-button>
      </div>
    </div>
  </div>
  <div>
    <ae-slideout [id]="getChildId( 'AeSlideOut', 1) " [name]="getChildName( 'AeSlideOut', 1) " [modelState]="getAddressSlideoutState() "
      [class.slide--animate]="getAddressSlideoutAnimateState() ">
      <div *ngIf="getAddressSlideoutAnimateState() ">
        <ae-address [id]=" 'address' " [name]=" 'address' " [AddressFormVMData]="AddressFormVM" (onSubmit)="onAddressSubmit($event) "
          (onCancel)="onAddressCancel($event) "></ae-address>
      </div>
    </ae-slideout>
    <ae-slideout [id]="getChildId('AeSlideOut', 2)" [name]="getChildName('AeSlideOut', 2)" [modelState]="getEmergencyContactsSlideoutState()"
      (cancel)="closeEmpEmergencyContactsUpdateForm($event)" [class.slide--animate]="showUpdateEmpEmergencyContactsForm">
      <ng-container *ngIf="showUpdateEmpEmergencyContactsForm">
        <employee-emergency-contacts [County]="County$ | async" [Country]="Country$ | async" [EmployeeRelations]="EmployeeRelation$ | async"
          [EmployeeEmergancyContactDetails]="employeeEmergancyContactDetails" (onSave)="saveEmpEmergencyContact($event)" (onClose)="closeEmpEmergencyContactsUpdateForm($event)"
          (aeCloseEC)="closeEmpEmergencyContactsUpdateForm($event)" (aeSaveEC)="saveEmpEmergencyContactsUpdateForm($event)"
          [Flag]="true" [toggleEC]="operationMode"></employee-emergency-contacts>
      </ng-container>
    </ae-slideout>
    <!--delete confirmation pop-up-->
    <div *ngIf="showDeleteConfirmDialog">
      <ae-modal-dialog [visible]="showDeleteConfirmDialog" (cancel)="deleteImportedEmployeeClosed($event)" [closable]="'true'"
        [id]="getChildId('AeModel', 1)" [name]="getChildName('AeModel', 1)">
        <div class="modal-dialog-header">
          <h3>{{'EMPLOYEE_IMPORT.Dialog_Heading_text' | translate:lang }}</h3>
        </div>
        <div class="modal-dialog-body">
          <p *ngIf="!(rowIndex == -1)">{{'EMPLOYEE_IMPORT.Dialog_Info' | translate: lang:{employeeFullName:_getEmployeesByIndex(rowIndex).FullName} }}
          </p>
          <p *ngIf="rowIndex == -1">{{'EMPLOYEE_IMPORT.Dialog_Info_All' | translate: lang }}</p>
        </div>
        <div class="modal-dialog-footer">
          <ae-button [text]="'EMPLOYEE_IMPORT.Btn_No' | translate:lang" [type]="'button'" [id]="'deleteConfirmNo'" [name]="'deleteConfirmNo'"
            (aeClick)="deleteImportedEmployeeClosed($event)"></ae-button>
          <ae-button [class]="lightClass" [text]="'EMPLOYEE_IMPORT.Btn_Yes' | translate:lang" [type]="'button'" [id]="'deleteConfirmYes'"
            [name]="'deleteConfirmYes'" (aeClick)="deleteImportedEmployeeConfirmed($event)"></ae-button>
        </div>
      </ae-modal-dialog>
    </div>
  </div>
</div>
<ae-modal-dialog [visible]="getEmployeewithoutEmailPopup()" (click)="modalClosed($event)" [closable]="true" [id]="'confirmModal'"
  [name]="'confirmModal'" *ngIf="getEmployeewithoutEmailPopup()">
  <div class="modal-dialog-header">
    <h3>{{'EMPLOYEE_BULK_UPDATE.Dialog.Heading_text' | translate:lang}}</h3>
  </div>
  <div class="modal-dialog-body">
    <p>{{'EMPLOYEE_BULK_UPDATE.EMPLOYEE_WITH_NO_MAILS_CONFIRMATION' | translate:lang}}</p>
    <p>{{'EMPLOYEE_BULK_UPDATE.EMPLOYEE_WITH_NO_MAILS_CONFIRMATION_AGREED' | translate:lang}}</p>
  </div>
  <div class="modal-dialog-footer">
    <ae-button [text]="'EMPLOYEE_BULK_UPDATE.Dialog.Btn_No' | translate:lang" [type]="'button'" [id]="'confirmNo'" [name]="'confirmNo'"
      (aeClick)="modalClosed('no')"></ae-button>
    <ae-button [class]="lightClass" [text]="'EMPLOYEE_BULK_UPDATE.Dialog.Btn_Yes' | translate:lang" [type]="'button'" [id]="'confirmYes'"
      [name]="'confirmYes'" (aeClick)="onEmployeewithoutEmail($event)"></ae-button>

  </div>
</ae-modal-dialog>
